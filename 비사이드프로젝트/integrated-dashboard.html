<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NetMood Analyzer - 통합 대시보드</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f8f0;
      min-height: 100vh;
      color: #333;
    }

    .dashboard-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* 헤더 */
    .header {
      text-align: center;
      margin-bottom: 20px;
      background: transparent;
      padding: 16px 0 6px;
    }

    .header h1 {
      font-size: 2rem;
      color: #1f6f68;
      margin-bottom: 6px;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    /* 데이터 카드 스타일 */
    .data-card {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #ccc;
      border-radius: 15px;
      padding: 20px;
      margin: 10px 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    /* 네비게이션 버튼 스타일 */
    .nav-button {
      display: inline-block;
      padding: 12px 24px;
      margin: 8px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-button.terms {
      background: #4CAF50;
      color: white;
    }

    .nav-button.guide {
      background: #2196F3;
      color: white;
    }

    .nav-button.back {
      background: #2196F3;
      color: white;
    }

    .nav-button.help {
      background: #2196F3;
      color: white;
    }

    .nav-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* 사용자 도움말 팝업 스타일 */
    .help-popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .help-popup.active {
      display: flex;
    }

    .help-popup-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      margin: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .help-close {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #999;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .help-close:hover {
      color: #333;
    }

    /* 네비게이션 탭 */
    .nav-tabs {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      padding: 10px;
      backdrop-filter: blur(10px);
    }

    .nav-tab {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      background: transparent;
      color: #666;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-tab.active {
      background: linear-gradient(45deg, #27d3b2, #18b39a);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(24, 179, 154, 0.3);
    }

    .nav-tab:hover:not(.active) {
      background: rgba(39, 211, 178, 0.12);
      color: #1f6f68;
    }

    /* 탭 컨텐츠 */
    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* 네트워크 건강도 요약 대시보드 */
    .health-summary {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    .health-score-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .health-score-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(45deg, #20c997, #27d3b2);
    }

    .health-score {
      font-size: 4rem;
      font-weight: bold;
      margin-bottom: 10px;
      background: linear-gradient(45deg, #20c997, #27d3b2);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .health-status {
      font-size: 1.2rem;
      color: #28a745;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .health-message {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 20px;
    }

    .data-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }

    .data-stat {
      text-align: center;
    }

    .data-stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #333;
    }

    .data-stat-label {
      font-size: 0.8rem;
      color: #666;
      margin-top: 5px;
    }

    .health-insights {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .insights-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: #333;
    }

    .insight-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin-bottom: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
      border-left: 4px solid #667eea;
      cursor: pointer;
    }

    .insight-icon {
      font-size: 1.2rem;
      margin-right: 12px;
    }

    /* 감정별 카드 */
    .emotion-cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .emotion-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 25px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .emotion-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }

    .emotion-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .emotion-card.calm::before {
      background: linear-gradient(45deg, #20c997, #27d3b2);
    }

    .emotion-card.happy::before {
      background: linear-gradient(45deg, #17a2b8, #27d3b2);
    }

    .emotion-card.anxious::before {
      background: linear-gradient(45deg, #ffc107, #fd7e14);
    }

    .emotion-card.angry::before {
      background: linear-gradient(45deg, #dc3545, #e83e8c);
    }

    .emotion-card.sad::before {
      background: linear-gradient(45deg, #6f42c1, #e83e8c);
    }

    .emotion-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .emotion-icon {
      font-size: 2rem;
      margin-right: 15px;
    }

    .emotion-info {
      flex: 1;
    }

    .emotion-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
    }

    .emotion-name-en {
      font-size: 0.8rem;
      color: #666;
      margin-top: 2px;
    }

    .emotion-percentage {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .emotion-message {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 15px;
    }

    .emotion-update {
      font-size: 0.8rem;
      color: #999;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .emotion-card.calm .emotion-percentage {
      color: #28a745;
    }

    .emotion-card.happy .emotion-percentage {
      color: #17a2b8;
    }

    .emotion-card.anxious .emotion-percentage {
      color: #ffc107;
    }

    .emotion-card.angry .emotion-percentage {
      color: #dc3545;
    }

    .emotion-card.sad .emotion-percentage {
      color: #6f42c1;
    }

    /* 실시간 모니터링 상태 */
    .monitoring-status {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .status-box {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 25px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .status-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: #333;
    }

    .chart-container {
      position: relative;
      height: 200px;
      margin-bottom: 15px;
    }

    .status-indicators {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .indicator {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .indicator-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    .indicator-dot.green {
      background: #28a745;
    }

    .indicator-dot.yellow {
      background: #ffc107;
    }

    .indicator-dot.red {
      background: #dc3545;
    }

    /* 위험 감정 감지 섹션 */
    .threat-detection {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      border-left: 6px solid #dc3545;
    }

    .threat-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .threat-icon {
      font-size: 2rem;
      margin-right: 15px;
      color: #dc3545;
    }

    .threat-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #dc3545;
    }

    .threat-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .threat-info {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .threat-item {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .threat-label {
      font-weight: 600;
      color: #333;
      min-width: 120px;
    }

    .threat-value {
      color: #666;
    }

    .threat-gauge {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .gauge-bar {
      flex: 1;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }

    .gauge-fill {
      height: 100%;
      background: linear-gradient(45deg, #dc3545, #e83e8c);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .action-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .action-btn.primary {
      background: linear-gradient(45deg, #dc3545, #e83e8c);
      color: white;
    }

    .action-btn.secondary {
      background: rgba(255, 255, 255, 0.8);
      color: #333;
      border: 1px solid #ddd;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* Chatbot trigger button inside threat-detection */
    .contact-support-btn {
      padding: 10px 14px;
      border-radius: 8px;
      background: #17a2b8;
      color: white;
      border: 0;
      cursor: pointer
    }

    /* 이력 및 내보내기 */
    .history-section {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .history-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #333;
    }

    .history-controls {
      display: flex;
      gap: 10px;
    }

    .control-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: rgba(102, 126, 234, 0.2);
    }

    .history-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      margin-bottom: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
      border-left: 4px solid;
    }

    .history-item.threat {
      border-left-color: #dc3545;
    }

    .history-item.warning {
      border-left-color: #ffc107;
    }

    .history-item.normal {
      border-left-color: #28a745;
    }

    .history-info {
      flex: 1;
    }

    .history-time {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 5px;
    }

    .history-desc {
      font-weight: 500;
      color: #333;
    }

    .history-severity {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .history-severity.high {
      background: #dc3545;
      color: white;
    }

    .history-severity.medium {
      background: #ffc107;
      color: #333;
    }

    .history-severity.low {
      background: #28a745;
      color: white;
    }

    /* 애니메이션 */
    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }

      100% {
        opacity: 1;
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .tab-content.active {
      animation: slideIn 0.5s ease-out;
    }

    /* 반응형 디자인 */
    @media (max-width: 1200px) {
      .health-summary {
        grid-template-columns: 1fr;
      }

      .threat-content {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .dashboard-container {
        padding: 10px;
      }

      .nav-tabs {
        flex-wrap: wrap;
        gap: 5px;
      }

      .nav-tab {
        padding: 8px 16px;
        font-size: 0.9rem;
      }

      .health-score {
        font-size: 3rem;
      }

      .emotion-cards-grid {
        grid-template-columns: 1fr;
      }

      .monitoring-status {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        flex-direction: column;
      }

      .history-header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }

      .history-controls {
        width: 100%;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .header h1 {
        font-size: 1.8rem;
      }

      .health-score {
        font-size: 2.5rem;
      }

      .emotion-card {
        padding: 20px;
      }

      .emotion-icon {
        font-size: 1.5rem;
      }

      .emotion-percentage {
        font-size: 1.5rem;
      }

      /* 감정 분석 페이지 모바일 최적화 */
      .status-title {
        font-size: 1rem !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 8px !important;
      }

      .time-range-btn {
        padding: 6px 12px !important;
        font-size: 0.85rem !important;
        margin: 2px !important;
      }

      .chart-container {
        height: 200px !important;
        margin-bottom: 10px !important;
      }

      .emotion-cards-grid {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      .emotion-card {
        padding: 15px !important;
        margin-bottom: 8px !important;
      }

      .emotion-header {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 8px !important;
      }

      .emotion-name {
        font-size: 1rem !important;
      }

      .emotion-percentage {
        font-size: 1.8rem !important;
        margin: 8px 0 !important;
      }

      .emotion-message {
        font-size: 0.85rem !important;
        line-height: 1.4 !important;
      }

      /* 감정 분석 컨트롤 버튼 모바일 최적화 */
      .control-btn {
        padding: 8px 12px !important;
        font-size: 0.85rem !important;
        margin: 2px !important;
      }

      /* 분석 정보 박스 모바일 최적화 */
      .status-box {
        padding: 15px !important;
        margin-bottom: 12px !important;
      }

      .history-title {
        font-size: 0.9rem !important;
      }

      /* 모바일에서 가로 스크롤 방지 */
      body {
        overflow-x: hidden !important;
      }

      .dashboard-container {
        padding: 10px !important;
        max-width: 100% !important;
      }

      /* 감정 변화 추이 제목 모바일 최적화 */
      .status-title div {
        flex-wrap: wrap !important;
        gap: 4px !important;
      }
    }

    /* 감정 분석 페이지 스타일 */
    .emotion-analysis-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .emotion-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
    }

    .emotion-header-left {
      flex: 1;
    }

    .back-link {
      color: #666;
      text-decoration: none;
      font-size: 0.9rem;
      margin-bottom: 10px;
      display: inline-block;
    }

    .emotion-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #333;
      margin: 0 0 8px 0;
    }

    .emotion-subtitle {
      font-size: 1.1rem;
      color: #666;
      margin: 0;
    }

    .emotion-header-right {
      display: flex;
      gap: 12px;
    }

    .header-btn {
      width: 40px;
      height: 40px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.2s ease;
    }

    .header-btn:hover {
      background: #f8f9fa;
      border-color: #27d3b2;
    }

    .emotion-summary-cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .emotion-summary-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .emotion-summary-card:hover {
      transform: translateY(-2px);
    }

    .emotion-percentage {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .emotion-summary-card.stressed .emotion-percentage {
      color: #6f42c1;
    }

    .emotion-summary-card.happy .emotion-percentage {
      color: #17a2b8;
    }

    .emotion-summary-card.angry .emotion-percentage {
      color: #dc3545;
    }

    .emotion-summary-card.anxious .emotion-percentage {
      color: #ffc107;
    }

    .emotion-label {
      font-size: 1rem;
      color: #666;
      font-weight: 500;
    }

    .notification-center {
      background: linear-gradient(135deg, #28a745, #20c997);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      color: white;
    }

    .notification-content {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .notification-icon {
      font-size: 2rem;
    }

    .notification-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .notification-desc {
      font-size: 0.95rem;
      opacity: 0.9;
    }

    .emotion-trend-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .trend-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .trend-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #333;
      margin: 0;
    }

    .time-range-selector {
      display: flex;
      gap: 8px;
    }

    .time-range-btn {
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #666;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s ease;
    }

    .time-range-btn.active {
      background: #27d3b2;
      color: white;
      border-color: #27d3b2;
    }

    .time-range-btn:hover:not(.active) {
      background: #f8f9fa;
    }

    .chart-container {
      height: 300px;
      margin-bottom: 20px;
    }

    .emotion-legend {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }

    .legend-value {
      font-weight: 600;
      color: #333;
    }

    .bottom-sections {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .upload-section,
    .analysis-info-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .section-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .upload-content {
      text-align: center;
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 16px;
    }

    .upload-message {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .upload-desc {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 20px;
    }

    .file-input {
      display: none;
    }

    .file-input+label {
      display: inline-block;
      padding: 12px 24px;
      background: #333;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s ease;
    }

    .file-input+label:hover {
      background: #555;
    }

    .upload-info {
      margin-top: 16px;
      text-align: left;
    }

    .info-item {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 4px;
    }

    .analysis-stats {
      margin-bottom: 20px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .stat-item:last-child {
      border-bottom: none;
    }

    .stat-label {
      color: #666;
      font-size: 0.9rem;
    }

    .stat-value {
      font-weight: 600;
      color: #333;
    }

    .ai-engine {
      border-top: 1px solid #f0f0f0;
      padding-top: 16px;
    }

    .ai-title {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 12px 0;
    }

    .ai-features {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .ai-features li {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 6px;
      padding-left: 16px;
      position: relative;
    }

    .ai-features li:before {
      content: "•";
      color: #27d3b2;
      font-weight: bold;
      position: absolute;
      left: 0;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .emotion-header {
        flex-direction: column;
        gap: 16px;
      }

      .emotion-title {
        font-size: 2rem;
      }

      .emotion-summary-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .bottom-sections {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .emotion-legend {
        gap: 12px;
      }

      .trend-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
    }

    @media (max-width: 480px) {
      .emotion-summary-cards {
        grid-template-columns: 1fr;
      }

      .emotion-legend {
        flex-direction: column;
        gap: 8px;
      }
    }

    /* 실시간 모니터링 페이지 스타일 */
    .realtime-monitoring-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .info-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .info-item {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .info-icon {
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .info-icon.connection {
      background: rgba(40, 167, 69, 0.1);
    }

    .info-icon.time {
      background: rgba(23, 162, 184, 0.1);
    }

    .info-icon.data {
      background: rgba(255, 193, 7, 0.1);
    }

    .info-icon.threat {
      background: rgba(220, 53, 69, 0.1);
    }

    .info-content {
      flex: 1;
    }

    .info-label {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 4px;
    }

    .info-value {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
    }

    .info-sub {
      font-size: 0.8rem;
      color: #666;
      font-weight: 400;
    }

    .monitoring-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 30px;
    }

    .emotion-status-card,
    .intensity-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .emotion-status-card {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .card-icon {
      font-size: 1.5rem;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0;
    }

    .emotion-display {
      text-align: center;
    }

    .emotion-emoji {
      font-size: 4rem;
      margin-bottom: 16px;
    }

    .emotion-name {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .emotion-intensity {
      font-size: 1.1rem;
      margin-bottom: 8px;
      opacity: 0.9;
    }

    .last-update {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .intensity-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .intensity-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .intensity-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .intensity-bar {
      width: 100%;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }

    .intensity-fill {
      height: 100%;
      background: linear-gradient(90deg, #27d3b2, #20c997);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .intensity-value {
      font-size: 0.9rem;
      color: #333;
      font-weight: 600;
      text-align: right;
    }

    .intensity-stats {
      display: flex;
      gap: 16px;
      margin-top: 16px;
    }

    .stat-box {
      flex: 1;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #666;
    }

    .monitoring-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .emotion-feed-card,
    .network-performance-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .emotion-feed {
      max-height: 300px;
      overflow-y: auto;
    }

    .feed-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .feed-item:last-child {
      border-bottom: none;
    }

    .feed-emoji {
      font-size: 1.5rem;
      width: 32px;
      text-align: center;
    }

    .feed-content {
      flex: 1;
    }

    .feed-emotion {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 2px;
    }

    .feed-intensity {
      font-size: 0.85rem;
      color: #666;
    }

    .feed-time {
      font-size: 0.8rem;
      color: #999;
    }

    .performance-stats {
      display: flex;
      gap: 16px;
    }

    .performance-item {
      flex: 1;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .performance-number {
      font-size: 1.8rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 8px;
    }

    .performance-label {
      font-size: 0.9rem;
      color: #666;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .info-bar {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .monitoring-main {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .monitoring-details {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .performance-stats {
        flex-direction: column;
        gap: 12px;
      }

      .intensity-stats {
        flex-direction: column;
        gap: 12px;
      }
    }

    @media (max-width: 480px) {
      .info-bar {
        grid-template-columns: 1fr;
      }

      .info-item {
        padding: 16px;
      }

      .emotion-emoji {
        font-size: 3rem;
      }

      .emotion-name {
        font-size: 1.2rem;
      }
    }

    /* 위험 감지 페이지 스타일 */
    .risk-detection-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .risk-status-cards {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      margin-bottom: 30px;
    }

    .risk-status-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .risk-status-card:hover {
      transform: translateY(-2px);
    }

    .risk-status-card.total {
      border-left: 4px solid #dc3545;
    }

    .risk-status-card.high {
      border-left: 4px solid #dc3545;
    }

    .risk-status-card.medium {
      border-left: 4px solid #fd7e14;
    }

    .risk-status-card.low {
      border-left: 4px solid #ffc107;
    }

    .risk-status-card.resolved {
      border-left: 4px solid #28a745;
    }

    .risk-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .risk-number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .risk-status-card.total .risk-number {
      color: #dc3545;
    }

    .risk-status-card.high .risk-number {
      color: #dc3545;
    }

    .risk-status-card.medium .risk-number {
      color: #fd7e14;
    }

    .risk-status-card.low .risk-number {
      color: #ffc107;
    }

    .risk-status-card.resolved .risk-number {
      color: #28a745;
    }

    .risk-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .risk-filter-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .filter-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .filter-controls {
      display: flex;
      gap: 20px;
      align-items: end;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-group label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .filter-group select {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      font-size: 0.9rem;
    }

    .filter-actions {
      display: flex;
      gap: 12px;
      margin-left: auto;
    }

    .filter-btn {
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #333;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .filter-btn:hover {
      background: #f8f9fa;
      border-color: #27d3b2;
    }

    .risk-list-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .risk-list-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 20px 0;
    }

    .no-risk-message {
      text-align: center;
      padding: 60px 20px;
    }

    .no-risk-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .no-risk-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #28a745;
      margin-bottom: 12px;
    }

    .no-risk-desc {
      font-size: 1rem;
      color: #666;
      line-height: 1.5;
    }

    .risk-detection-settings {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .settings-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 20px 0;
    }

    .settings-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }

    .threshold-settings h4,
    .notification-settings h4 {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .threshold-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .threshold-label {
      min-width: 120px;
      font-size: 0.9rem;
      color: #666;
    }

    .threshold-slider {
      flex: 1;
      height: 6px;
      background: #e9ecef;
      border-radius: 3px;
      outline: none;
    }

    .threshold-slider::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      background: #27d3b2;
      border-radius: 50%;
      cursor: pointer;
    }

    .threshold-value {
      min-width: 20px;
      font-weight: 600;
      color: #333;
    }

    .notification-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .notification-label {
      min-width: 40px;
      font-size: 0.9rem;
      color: #666;
    }

    .notification-type {
      flex: 1;
      font-size: 0.9rem;
      color: #333;
    }

    .notification-toggle {
      padding: 4px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      color: #666;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .notification-toggle.active {
      background: #27d3b2;
      color: white;
      border-color: #27d3b2;
    }

    .risk-summary {
      text-align: center;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .risk-status-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .filter-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }

      .filter-actions {
        margin-left: 0;
        justify-content: center;
      }

      .settings-content {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }

    @media (max-width: 480px) {
      .risk-status-cards {
        grid-template-columns: 1fr;
      }

      .threshold-item,
      .notification-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }

    /* 모달 */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: #fff;
      border-radius: 16px;
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* Admin: GitHub 자동 덮어쓰기 및 Vercel 트리거 UI (추가) */


    .modal-overlay#adminSyncOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#adminSyncOverlay {
      width: 520px;
      max-width: 92vw;
    }

    .modal-body#adminSyncOverlay {
      display: grid;
      gap: 10px;
    }

    .modal-body#adminSyncOverlay label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .modal-body#adminSyncOverlay input {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      font-size: 0.9rem;
    }

    .modal-body#adminSyncOverlay hr {
      border: none;
      height: 1px;
      background: #e9ecef;
      margin: 12px 0;
    }

    .modal-body#adminSyncOverlay .action-btn {
      padding: 10px 12px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-block;
      text-align: center;
      width: 100%;
    }

    .modal-body#adminSyncOverlay .action-btn.primary {
      background: linear-gradient(45deg, #dc3545, #e83e8c);
      color: white;
      border: none;
    }

    .modal-body#adminSyncOverlay .action-btn.secondary {
      background: rgba(255, 255, 255, 0.8);
      color: #333;
      border: 1px solid #ddd;
    }

    .modal-body#adminSyncOverlay pre {
      margin-top: 8px;
      font-family: monospace;
      max-height: 200px;
      overflow: auto;
      background: #f6f8fa;
      padding: 8px;
      border-radius: 6px;
    }

    /* 스크롤바 스타일링 */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-thumb {
      background: #27d3b2;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    /* 접근성 모달: 공통 오버레이 2개 (상세/알림) */
    /* detailModal */
    .modal-overlay#detailModalOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#detailModalOverlay {
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header#detailModalOverlay {
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title#detailModalOverlay {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body#detailModalOverlay {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn#detailModalOverlay {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* notificationSettingsModal */
    .modal-overlay#notificationModalOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#notificationModalOverlay {
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header#notificationModalOverlay {
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title#notificationModalOverlay {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body#notificationModalOverlay {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn#notificationModalOverlay {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* 감정 분석 페이지 스타일 */
    .emotion-analysis-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .emotion-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
    }

    .emotion-header-left {
      flex: 1;
    }

    .back-link {
      color: #666;
      text-decoration: none;
      font-size: 0.9rem;
      margin-bottom: 10px;
      display: inline-block;
    }

    .emotion-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #333;
      margin: 0 0 8px 0;
    }

    .emotion-subtitle {
      font-size: 1.1rem;
      color: #666;
      margin: 0;
    }

    .emotion-header-right {
      display: flex;
      gap: 12px;
    }

    .header-btn {
      width: 40px;
      height: 40px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.2s ease;
    }

    .header-btn:hover {
      background: #f8f9fa;
      border-color: #27d3b2;
    }

    .emotion-summary-cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .emotion-summary-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .emotion-summary-card:hover {
      transform: translateY(-2px);
    }

    .emotion-percentage {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .emotion-summary-card.stressed .emotion-percentage {
      color: #6f42c1;
    }

    .emotion-summary-card.happy .emotion-percentage {
      color: #17a2b8;
    }

    .emotion-summary-card.angry .emotion-percentage {
      color: #dc3545;
    }

    .emotion-summary-card.anxious .emotion-percentage {
      color: #ffc107;
    }

    .emotion-label {
      font-size: 1rem;
      color: #666;
      font-weight: 500;
    }

    .notification-center {
      background: linear-gradient(135deg, #28a745, #20c997);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      color: white;
    }

    .notification-content {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .notification-icon {
      font-size: 2rem;
    }

    .notification-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .notification-desc {
      font-size: 0.95rem;
      opacity: 0.9;
    }

    .emotion-trend-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .trend-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .trend-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #333;
      margin: 0;
    }

    .time-range-selector {
      display: flex;
      gap: 8px;
    }

    .time-range-btn {
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #666;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s ease;
    }

    .time-range-btn.active {
      background: #27d3b2;
      color: white;
      border-color: #27d3b2;
    }

    .time-range-btn:hover:not(.active) {
      background: #f8f9fa;
    }

    .chart-container {
      height: 300px;
      margin-bottom: 20px;
    }

    .emotion-legend {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }

    .legend-value {
      font-weight: 600;
      color: #333;
    }

    .bottom-sections {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .upload-section,
    .analysis-info-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .section-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .upload-content {
      text-align: center;
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 16px;
    }

    .upload-message {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .upload-desc {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 20px;
    }

    .file-input {
      display: none;
    }

    .file-input+label {
      display: inline-block;
      padding: 12px 24px;
      background: #333;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s ease;
    }

    .file-input+label:hover {
      background: #555;
    }

    .upload-info {
      margin-top: 16px;
      text-align: left;
    }

    .info-item {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 4px;
    }

    .analysis-stats {
      margin-bottom: 20px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .stat-item:last-child {
      border-bottom: none;
    }

    .stat-label {
      color: #666;
      font-size: 0.9rem;
    }

    .stat-value {
      font-weight: 600;
      color: #333;
    }

    .ai-engine {
      border-top: 1px solid #f0f0f0;
      padding-top: 16px;
    }

    .ai-title {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 12px 0;
    }

    .ai-features {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .ai-features li {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 6px;
      padding-left: 16px;
      position: relative;
    }

    .ai-features li:before {
      content: "•";
      color: #27d3b2;
      font-weight: bold;
      position: absolute;
      left: 0;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .emotion-header {
        flex-direction: column;
        gap: 16px;
      }

      .emotion-title {
        font-size: 2rem;
      }

      .emotion-summary-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .bottom-sections {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .emotion-legend {
        gap: 12px;
      }

      .trend-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
    }

    @media (max-width: 480px) {
      .emotion-summary-cards {
        grid-template-columns: 1fr;
      }

      .emotion-legend {
        flex-direction: column;
        gap: 8px;
      }
    }

    /* 실시간 모니터링 페이지 스타일 */
    .realtime-monitoring-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .info-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .info-item {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .info-icon {
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .info-icon.connection {
      background: rgba(40, 167, 69, 0.1);
    }

    .info-icon.time {
      background: rgba(23, 162, 184, 0.1);
    }

    .info-icon.data {
      background: rgba(255, 193, 7, 0.1);
    }

    .info-icon.threat {
      background: rgba(220, 53, 69, 0.1);
    }

    .info-content {
      flex: 1;
    }

    .info-label {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 4px;
    }

    .info-value {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
    }

    .info-sub {
      font-size: 0.8rem;
      color: #666;
      font-weight: 400;
    }

    .monitoring-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 30px;
    }

    .emotion-status-card,
    .intensity-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .emotion-status-card {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .card-icon {
      font-size: 1.5rem;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0;
    }

    .emotion-display {
      text-align: center;
    }

    .emotion-emoji {
      font-size: 4rem;
      margin-bottom: 16px;
    }

    .emotion-name {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .emotion-intensity {
      font-size: 1.1rem;
      margin-bottom: 8px;
      opacity: 0.9;
    }

    .last-update {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .intensity-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .intensity-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .intensity-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .intensity-bar {
      width: 100%;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }

    .intensity-fill {
      height: 100%;
      background: linear-gradient(90deg, #27d3b2, #20c997);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .intensity-value {
      font-size: 0.9rem;
      color: #333;
      font-weight: 600;
      text-align: right;
    }

    .intensity-stats {
      display: flex;
      gap: 16px;
      margin-top: 16px;
    }

    .stat-box {
      flex: 1;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #666;
    }

    .monitoring-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .emotion-feed-card,
    .network-performance-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .emotion-feed {
      max-height: 300px;
      overflow-y: auto;
    }

    .feed-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .feed-item:last-child {
      border-bottom: none;
    }

    .feed-emoji {
      font-size: 1.5rem;
      width: 32px;
      text-align: center;
    }

    .feed-content {
      flex: 1;
    }

    .feed-emotion {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 2px;
    }

    .feed-intensity {
      font-size: 0.85rem;
      color: #666;
    }

    .feed-time {
      font-size: 0.8rem;
      color: #999;
    }

    .performance-stats {
      display: flex;
      gap: 16px;
    }

    .performance-item {
      flex: 1;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .performance-number {
      font-size: 1.8rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 8px;
    }

    .performance-label {
      font-size: 0.9rem;
      color: #666;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .info-bar {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .monitoring-main {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .monitoring-details {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .performance-stats {
        flex-direction: column;
        gap: 12px;
      }

      .intensity-stats {
        flex-direction: column;
        gap: 12px;
      }
    }

    @media (max-width: 480px) {
      .info-bar {
        grid-template-columns: 1fr;
      }

      .info-item {
        padding: 16px;
      }

      .emotion-emoji {
        font-size: 3rem;
      }

      .emotion-name {
        font-size: 1.2rem;
      }
    }

    /* 위험 감지 페이지 스타일 */
    .risk-detection-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .risk-status-cards {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      margin-bottom: 30px;
    }

    .risk-status-card {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .risk-status-card:hover {
      transform: translateY(-2px);
    }

    .risk-status-card.total {
      border-left: 4px solid #dc3545;
    }

    .risk-status-card.high {
      border-left: 4px solid #dc3545;
    }

    .risk-status-card.medium {
      border-left: 4px solid #fd7e14;
    }

    .risk-status-card.low {
      border-left: 4px solid #ffc107;
    }

    .risk-status-card.resolved {
      border-left: 4px solid #28a745;
    }

    .risk-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .risk-number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .risk-status-card.total .risk-number {
      color: #dc3545;
    }

    .risk-status-card.high .risk-number {
      color: #dc3545;
    }

    .risk-status-card.medium .risk-number {
      color: #fd7e14;
    }

    .risk-status-card.low .risk-number {
      color: #ffc107;
    }

    .risk-status-card.resolved .risk-number {
      color: #28a745;
    }

    .risk-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .risk-filter-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .filter-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .filter-controls {
      display: flex;
      gap: 20px;
      align-items: end;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-group label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .filter-group select {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      font-size: 0.9rem;
    }

    .filter-actions {
      display: flex;
      gap: 12px;
      margin-left: auto;
    }

    .filter-btn {
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #333;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .filter-btn:hover {
      background: #f8f9fa;
      border-color: #27d3b2;
    }

    .risk-list-section {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .risk-list-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 20px 0;
    }

    .no-risk-message {
      text-align: center;
      padding: 60px 20px;
    }

    .no-risk-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .no-risk-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #28a745;
      margin-bottom: 12px;
    }

    .no-risk-desc {
      font-size: 1rem;
      color: #666;
      line-height: 1.5;
    }

    .risk-detection-settings {
      background: white;
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .settings-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 20px 0;
    }

    .settings-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }

    .threshold-settings h4,
    .notification-settings h4 {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
      margin: 0 0 16px 0;
    }

    .threshold-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .threshold-label {
      min-width: 120px;
      font-size: 0.9rem;
      color: #666;
    }

    .threshold-slider {
      flex: 1;
      height: 6px;
      background: #e9ecef;
      border-radius: 3px;
      outline: none;
    }

    .threshold-slider::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      background: #27d3b2;
      border-radius: 50%;
      cursor: pointer;
    }

    .threshold-value {
      min-width: 20px;
      font-weight: 600;
      color: #333;
    }

    .notification-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .notification-label {
      min-width: 40px;
      font-size: 0.9rem;
      color: #666;
    }

    .notification-type {
      flex: 1;
      font-size: 0.9rem;
      color: #333;
    }

    .notification-toggle {
      padding: 4px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      color: #666;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .notification-toggle.active {
      background: #27d3b2;
      color: white;
      border-color: #27d3b2;
    }

    .risk-summary {
      text-align: center;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .risk-status-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .filter-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }

      .filter-actions {
        margin-left: 0;
        justify-content: center;
      }

      .settings-content {
        grid-template-columns: 1fr;
        gap: 24px;
      }
    }

    @media (max-width: 480px) {
      .risk-status-cards {
        grid-template-columns: 1fr;
      }

      .threshold-item,
      .notification-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }

    /* 모달 */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: #fff;
      border-radius: 16px;
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* Admin: GitHub 자동 덮어쓰기 및 Vercel 트리거 UI (추가) */
    #adminSyncBtn {
      position: fixed;
      right: 12px;
      bottom: 12px;
      z-index: 1001;
      padding: 10px 12px;
      border-radius: 8px;
      background: #27d3b2;
      color: white;
      border: none;
      cursor: pointer;
    }

    .modal-overlay#adminSyncOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#adminSyncOverlay {
      width: 520px;
      max-width: 92vw;
    }

    .modal-body#adminSyncOverlay {
      display: grid;
      gap: 10px;
    }

    .modal-body#adminSyncOverlay label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .modal-body#adminSyncOverlay input {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      font-size: 0.9rem;
    }

    .modal-body#adminSyncOverlay hr {
      border: none;
      height: 1px;
      background: #e9ecef;
      margin: 12px 0;
    }

    .modal-body#adminSyncOverlay .action-btn {
      padding: 10px 12px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-block;
      text-align: center;
      width: 100%;
    }

    .modal-body#adminSyncOverlay .action-btn.primary {
      background: linear-gradient(45deg, #dc3545, #e83e8c);
      color: white;
      border: none;
    }

    .modal-body#adminSyncOverlay .action-btn.secondary {
      background: rgba(255, 255, 255, 0.8);
      color: #333;
      border: 1px solid #ddd;
    }

    .modal-body#adminSyncOverlay pre {
      margin-top: 8px;
      font-family: monospace;
      max-height: 200px;
      overflow: auto;
      background: #f6f8fa;
      padding: 8px;
      border-radius: 6px;
    }

    /* 스크롤바 스타일링 */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-thumb {
      background: #27d3b2;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    /* 접근성 모달: 공통 오버레이 2개 (상세/알림) */
    /* detailModal */
    .modal-overlay#detailModalOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#detailModalOverlay {
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header#detailModalOverlay {
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title#detailModalOverlay {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body#detailModalOverlay {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn#detailModalOverlay {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* notificationSettingsModal */
    .modal-overlay#notificationModalOverlay {
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content#notificationModalOverlay {
      width: min(720px, 92vw);
      max-height: 86vh;
      overflow: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease-out;
    }

    .modal-header#notificationModalOverlay {
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
    }

    .modal-title#notificationModalOverlay {
      font-size: 1.25rem;
      font-weight: 700;
      color: #333;
    }

    .modal-body#notificationModalOverlay {
      padding: 18px 22px 22px;
      color: #444;
      line-height: 1.6;
    }

    .modal-close-btn#notificationModalOverlay {
      border: none;
      background: transparent;
      font-size: 1.2rem;
      cursor: pointer;
      color: #666;
    }

    /* 업로드 버튼 스타일 */
    .upload-btn {
      display: inline-block;
      padding: 12px 24px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s ease;
      margin-top: 10px;
      font-size: 1rem;
    }

    .upload-btn:hover {
      background: #45a049;
    }

    .upload-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .upload-status {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    .upload-status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .upload-status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    /* 감정 설명 버튼 스타일 */
    .emotion-description-btn {
      padding: 12px 30px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .emotion-description-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      background: linear-gradient(45deg, #5a6fd8, #6a4190);
    }

    .emotion-description-btn:active {
      transform: translateY(0);
    }

    /* 사용자 도움말 모달 스타일 */
    .help-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
    }

    .help-modal-overlay.active {
      display: flex;
    }

    .help-modal-content {
      background: white;
      border-radius: 15px;
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .help-modal-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 25px 30px;
      border-radius: 15px 15px 0 0;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .help-modal-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .help-modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }

    .help-modal-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .help-modal-body {
      padding: 30px;
      line-height: 1.6;
    }

    .help-section {
      margin-bottom: 30px;
    }

    .help-section h3 {
      color: #333;
      font-size: 1.3rem;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #667eea;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .help-section p {
      color: #555;
      margin-bottom: 12px;
    }

    .help-section ul {
      margin: 15px 0;
      padding-left: 20px;
    }

    .help-section li {
      color: #555;
      margin-bottom: 8px;
    }

    .help-feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .help-feature-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid #667eea;
    }

    .help-feature-card h4 {
      color: #333;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .help-feature-card p {
      color: #666;
      font-size: 0.9rem;
      margin: 0;
    }

    .help-emotion-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .help-emotion-card {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-size: 0.9rem;
    }

    .help-emotion-card.joy {
      background: #e8f5e8;
      border: 2px solid #4CAF50;
    }

    .help-emotion-card.stress {
      background: #ffeaea;
      border: 2px solid #F44336;
    }

    .help-emotion-card.calm {
      background: #e3f2fd;
      border: 2px solid #2196F3;
    }

    .help-emotion-card.anger {
      background: #fff3e0;
      border: 2px solid #FF9800;
    }

    .help-emotion-card.anxiety {
      background: #f3e5f5;
      border: 2px solid #9C27B0;
    }

    .help-emotion-card h4 {
      margin: 0 0 8px 0;
      font-size: 1rem;
    }

    .help-emotion-card p {
      margin: 0;
      font-size: 0.8rem;
    }

    .help-faq {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .help-faq-item {
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e9ecef;
    }

    .help-faq-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .help-faq-question {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }

    .help-faq-answer {
      color: #666;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .help-modal-content {
        margin: 10px;
        max-height: 95vh;
      }

      .help-modal-header {
        padding: 20px;
      }

      .help-modal-title {
        font-size: 1.5rem;
      }

      .help-modal-body {
        padding: 20px;
      }

      .help-feature-grid {
        grid-template-columns: 1fr;
      }

      .help-emotion-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }
  </style>
</head>

<body>

  <div class="dashboard-container">
    <img src="NetMood Analyzer 로고 이미지.webp" alt="NetMood Analyzer 로고" width="101" height="101"
      style="display:block; margin: 6px auto 0 auto;" />
    <!-- 헤더 -->
    <header class="header">
      <h1>
        NetMood Analyzer 대시보드
      </h1>
      <p>실시간 네트워크 건강도 모니터링 및 감정 분석</p>
      <div
        style="margin-top: 15px; display: flex; justify-content: center; gap: 8px; align-items: center; flex-wrap: wrap;">
        <a href="terms.html" class="nav-button terms">약관 동의</a>
        <a href="guide.html" class="nav-button guide">서비스 안내</a>
        <button onclick="showHelpPopup()" class="nav-button help">사용자 도움말</button>
        <span id="deployStatus" style="font-size:0.9rem; color:#666; margin-left: 10px;"></span>
      </div>
    </header>

    <!-- 네비게이션 탭 -->
    <nav class="nav-tabs">
      <button class="nav-tab active" onclick="switchTab('overview')">📊 개요</button>
      <button class="nav-tab" onclick="switchTab('emotions')">🎭 감정 분석</button>
      <button class="nav-tab" onclick="switchTab('monitoring')">📈 실시간 모니터링</button>
      <button class="nav-tab" onclick="switchTab('threats')">🚨 위험 감지</button>
      <button class="nav-tab" onclick="switchTab('history')">📋 이력 관리</button>

    </nav>

    <!-- 개요 탭 -->
    <div id="overview" class="tab-content active">
      <!-- 네트워크 건강도 요약 -->
      <div class="health-summary">
        <div class="health-score-card">
          <div class="health-score" id="healthScore">7</div>
          <div class="health-status" id="healthStatus">주의 필요</div>
          <div class="health-message" id="healthMessage">
            네트워크에 일부 불안정한 패턴이 감지되었습니다.<br>
            지속적인 모니터링을 권장합니다.
          </div>
          <div class="data-stats">
            <div class="data-stat">
              <div class="data-stat-value" id="totalDataPoints">318</div>
              <div class="data-stat-label">분석 데이터</div>
            </div>
            <div class="data-stat">
              <div class="data-stat-value" id="activeConnections">24</div>
              <div class="data-stat-label">활성 연결</div>
            </div>
            <div class="data-stat">
              <div class="data-stat-value" id="threatLevel">중간</div>
              <div class="data-stat-label">위험 수준</div>
            </div>
          </div>
        </div>

        <div class="health-insights">
          <h3 class="insights-title">💡 네트워크 인사이트</h3>
          <div class="insight-item">
            <span class="insight-icon">📈</span>
            <span>지난 1시간 동안 패킷 전송률이 15% 증가했습니다.</span>
          </div>
          <div class="insight-item">
            <span class="insight-icon">⚠️</span>
            <span>불안한 패턴이 3회 감지되었습니다. 주의가 필요합니다.</span>
          </div>
          <div class="insight-item">
            <span class="insight-icon">✅</span>
            <span>평온한 트래픽이 전체의 65%를 차지하고 있습니다.</span>
          </div>
          <div class="insight-item">
            <span class="insight-icon">🔄</span>
            <span>마지막 업데이트: <span id="lastUpdate">2분 전</span></span>
          </div>
        </div>
      </div>

      <!-- 감정별 카드 요약 -->
      <div class="emotion-cards-grid">
        <div class="emotion-card calm">
          <div class="emotion-header">
            <div class="emotion-icon">😌</div>
            <div class="emotion-info">
              <div class="emotion-name">평온</div>
              <div class="emotion-name-en">Calm</div>
            </div>
          </div>
          <div class="emotion-percentage">65%</div>
          <div class="emotion-message">네트워크가 안정적인 상태입니다.</div>
          <div class="emotion-update">
            <span>🕒</span>
            <span>2분 전 업데이트</span>
          </div>
        </div>

        <div class="emotion-card happy">
          <div class="emotion-header">
            <div class="emotion-icon">😊</div>
            <div class="emotion-info">
              <div class="emotion-name">기쁨</div>
              <div class="emotion-name-en">Happy</div>
            </div>
          </div>
          <div class="emotion-percentage">20%</div>
          <div class="emotion-message">건전한 네트워크 활동이 감지되었습니다.</div>
          <div class="emotion-update">
            <span>🕒</span>
            <span>1분 전 업데이트</span>
          </div>
        </div>

        <div class="emotion-card anxious">
          <div class="emotion-header">
            <div class="emotion-icon">😰</div>
            <div class="emotion-info">
              <div class="emotion-name">불안</div>
              <div class="emotion-name-en">Anxious</div>
            </div>
          </div>
          <div class="emotion-percentage">10%</div>
          <div class="emotion-message">일부 비정상적인 패턴이 감지되었습니다.</div>
          <div class="emotion-update">
            <span>🕒</span>
            <span>30초 전 업데이트</span>
          </div>
        </div>

        <div class="emotion-card angry">
          <div class="emotion-header">
            <div class="emotion-icon">😡</div>
            <div class="emotion-info">
              <div class="emotion-name">화남</div>
              <div class="emotion-name-en">Angry</div>
            </div>
          </div>
          <div class="emotion-percentage">3%</div>
          <div class="emotion-message">위험한 패턴이 소수 감지되었습니다.</div>
          <div class="emotion-update">
            <span>🕒</span>
            <span>1분 전 업데이트</span>
          </div>
        </div>

        <div class="emotion-card sad">
          <div class="emotion-header">
            <div class="emotion-icon">😢</div>
            <div class="emotion-info">
              <div class="emotion-name">슬픔</div>
              <div class="emotion-name-en">Sad</div>
            </div>
          </div>
          <div class="emotion-percentage">2%</div>
          <div class="emotion-message">네트워크 활동이 저조한 상태입니다.</div>
          <div class="emotion-update">
            <span>🕒</span>
            <span>2분 전 업데이트</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 감정 분석 탭 -->
    <div id="emotions" class="tab-content">
      <div class="emotion-analysis-container">
        <!-- 상단 헤더 -->
        <div class="emotion-header">
          <div class="emotion-header-left">
            <a href="#" class="back-link">← 메인으로</a>
            <h1 class="emotion-title">상세 분석</h1>
            <p class="emotion-subtitle">1,000개 데이터 포인트 분석 결과</p>
          </div>
          <div class="emotion-header-right">
            <button class="header-btn" title="감정 설명">?</button>
            <button class="header-btn" id="analysisRefreshBtn" title="새로고침">🔄</button>
            <button class="header-btn" id="analysisExportBtn" title="내보내기">📤</button>
          </div>
        </div>

        <!-- 감정 요약 카드 -->
        <div class="emotion-summary-cards" id="emotionSummaryCards">
          <div class="emotion-summary-card stressed">
            <div class="emotion-percentage">22%</div>
            <div class="emotion-label">stressed</div>
          </div>
          <div class="emotion-summary-card happy">
            <div class="emotion-percentage">21%</div>
            <div class="emotion-label">happy</div>
          </div>
          <div class="emotion-summary-card angry">
            <div class="emotion-percentage">20%</div>
            <div class="emotion-label">angry</div>
          </div>
          <div class="emotion-summary-card anxious">
            <div class="emotion-percentage">19%</div>
            <div class="emotion-label">anxious</div>
          </div>
        </div>

        <!-- 알림 센터 -->
        <div class="notification-center">
          <div class="notification-content">
            <div class="notification-icon">🔔</div>
            <div class="notification-message">
              <div class="notification-title">모든 것이 정상입니다!</div>
              <div class="notification-desc">현재 위험한 감정 상태가 감지되지 않았습니다.</div>
            </div>
          </div>
        </div>

        <!-- 감정 변화 추이 -->
        <div class="emotion-trend-section">
          <div class="trend-header">
            <h3 class="trend-title">감정 변화 추이</h3>
            <div class="time-range-selector">
              <button class="time-range-btn active" data-range="1d" onclick="updateEmotionChartRange('1d')">1일</button>
              <button class="time-range-btn" data-range="1m" onclick="updateEmotionChartRange('1m')">1달</button>
              <button class="time-range-btn" data-range="3m" onclick="updateEmotionChartRange('3m')">3달</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="emotionDetailChart"></canvas>
          </div>
          <div class="emotion-legend">
            <div class="legend-item">
              <div class="legend-color" style="background: #28a745;"></div>
              <span>평온</span>
              <span class="legend-value">0.9</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #17a2b8;"></div>
              <span>기쁨</span>
              <span class="legend-value">1.2</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #6f42c1;"></div>
              <span>스트레스</span>
              <span class="legend-value">0.8</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #ffc107;"></div>
              <span>불안</span>
              <span class="legend-value">1.3</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #dc3545;"></div>
              <span>화남</span>
              <span class="legend-value">1.0</span>
            </div>
          </div>
        </div>

        <!-- 감정 설명 버튼 -->
        <div style="text-align: center; margin: 30px 0;">
          <button id="emotionDescriptionBtn" class="emotion-description-btn" onclick="showEmotionDescription()">
            감정 설명
          </button>
        </div>

        <!-- 하단 섹션 -->
        <div class="bottom-sections">
          <div class="upload-section">
            <h3 class="section-title">네트워크 데이터 업로드</h3>
            <div class="upload-content">
              <div class="upload-icon">☁️</div>
              <div class="upload-message">CSV 파일을 업로드하세요</div>
              <div class="upload-desc">네트워크 트래픽 데이터를 AI가 감정으로 분석합니다</div>
              <input type="file" id="csvFileInputAnalysis2" accept=".csv" class="file-input" />
              <button id="selectFileBtn" class="upload-btn" onclick="selectCsvFile()">CSV 파일 선택</button>
              <button id="uploadCsvBtn" class="upload-btn" onclick="uploadCsvFile()" style="display: none;">파일
                업로드</button>
              <div class="upload-info">
                <div class="info-item">• 지원 형식: CSV 파일</div>
                <div class="info-item">• 권장 컬럼: timestamp, packetCount, latency, bandwidth</div>
                <div class="info-item">• 최대 파일 크기: 10MB</div>
              </div>
              <div id="uploadStatus" class="upload-status" style="display: none;"></div>
            </div>
          </div>

          <div class="analysis-info-section">
            <h3 class="section-title">분석 정보</h3>
            <div class="analysis-stats">
              <div class="stat-item">
                <span class="stat-label">전체 데이터:</span>
                <span class="stat-value" id="analysisTotal">1,000개</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">분석 기간:</span>
                <span class="stat-value" id="analysisPeriod">7일</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">위험 상황:</span>
                <span class="stat-value" id="analysisRisks">0건</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">마지막 업데이트:</span>
                <span class="stat-value" id="analysisLastUpdate">오후 3:32:02</span>
              </div>
            </div>
            <div class="ai-engine">
              <h4 class="ai-title">AI 분석 엔진</h4>
              <ul class="ai-features">
                <li>실시간 감정 분류</li>
                <li>패턴 기반 예측</li>
                <li>이상 징후 자동 감지</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 실시간 모니터링 탭 -->
    <div id="monitoring" class="tab-content">
      <div class="realtime-monitoring-container">
        <!-- 상단 정보 바 -->
        <div class="info-bar">
          <div class="info-item">
            <div class="info-icon connection">🟢</div>
            <div class="info-content">
              <div class="info-label">연결 상태</div>
              <div class="info-value">온라인</div>
            </div>
          </div>
          <div class="info-item">
            <div class="info-icon time">🕐</div>
            <div class="info-content">
              <div class="info-label">현재 시간</div>
              <div class="info-value" id="currentTime">2025. 10. 8. 오후 3:32:28</div>
            </div>
          </div>
          <div class="info-item">
            <div class="info-icon data">⚡</div>
            <div class="info-content">
              <div class="info-label">데이터 포인트</div>
              <div class="info-value">60 <span class="info-sub">최근 5분</span></div>
            </div>
          </div>
          <div class="info-item">
            <div class="info-icon threat">⚠️</div>
            <div class="info-content">
              <div class="info-label">위험 감지</div>
              <div class="info-value">6 <span class="info-sub">건</span></div>
            </div>
          </div>
        </div>

        <!-- 중앙 모니터링 섹션 -->
        <div class="monitoring-main">
          <div class="emotion-status-card">
            <div class="card-header">
              <div class="card-icon">📶</div>
              <h3 class="card-title">실시간 감정 상태</h3>
            </div>
            <div class="emotion-display">
              <div class="emotion-emoji">😊</div>
              <div class="emotion-name">평온</div>
              <div class="emotion-intensity">강도: 3/10</div>
              <div class="last-update">마지막 업데이트: 오후 3:32:18</div>
            </div>
          </div>

          <div class="intensity-card">
            <div class="card-header">
              <h3 class="card-title">감정 강도</h3>
            </div>
            <div class="intensity-content">
              <div class="intensity-item">
                <div class="intensity-label">현재 강도</div>
                <div class="intensity-bar">
                  <div class="intensity-fill" style="width: 30%;"></div>
                </div>
                <div class="intensity-value">3/10</div>
              </div>
              <div class="intensity-item">
                <div class="intensity-label">평균 강도 (5분)</div>
                <div class="intensity-bar">
                  <div class="intensity-fill" style="width: 47%;"></div>
                </div>
                <div class="intensity-value">4.7/10</div>
              </div>
              <div class="intensity-stats">
                <div class="stat-box">
                  <div class="stat-number">60</div>
                  <div class="stat-label">총 데이터</div>
                </div>
                <div class="stat-box">
                  <div class="stat-number">6</div>
                  <div class="stat-label">위험 상황</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 하단 상세 정보 -->
        <div class="monitoring-details">
          <div class="emotion-feed-card">
            <div class="card-header">
              <h3 class="card-title">실시간 감정 피드</h3>
            </div>
            <div class="emotion-feed">
              <div class="feed-item">
                <div class="feed-emoji">😊</div>
                <div class="feed-content">
                  <div class="feed-emotion">평온</div>
                  <div class="feed-intensity">강도 3</div>
                </div>
                <div class="feed-time">오후 3:32:18</div>
              </div>
              <div class="feed-item">
                <div class="feed-emoji">😡</div>
                <div class="feed-content">
                  <div class="feed-emotion">화남</div>
                  <div class="feed-intensity">강도 5</div>
                </div>
                <div class="feed-time">오후 3:31:17</div>
              </div>
              <div class="feed-item">
                <div class="feed-emoji">😟</div>
                <div class="feed-content">
                  <div class="feed-emotion">불안</div>
                  <div class="feed-intensity">강도 4</div>
                </div>
                <div class="feed-time">오후 3:30:17</div>
              </div>
              <div class="feed-item">
                <div class="feed-emoji">😁</div>
                <div class="feed-content">
                  <div class="feed-emotion">기쁨</div>
                  <div class="feed-intensity">강도 3</div>
                </div>
                <div class="feed-time">오후 3:29:17</div>
              </div>
              <div class="feed-item">
                <div class="feed-emoji">😡</div>
                <div class="feed-content">
                  <div class="feed-emotion">화남</div>
                  <div class="feed-intensity">강도 6</div>
                </div>
                <div class="feed-time">오후 3:28:17</div>
              </div>
            </div>
          </div>

          <div class="network-performance-card">
            <div class="card-header">
              <h3 class="card-title">네트워크 성능 지표</h3>
            </div>
            <div class="performance-stats">
              <div class="performance-item">
                <div class="performance-number">4,175</div>
                <div class="performance-label">패킷 수</div>
              </div>
              <div class="performance-item">
                <div class="performance-number">67ms</div>
                <div class="performance-label">지연시간</div>
              </div>
              <div class="performance-item">
                <div class="performance-number">671Mbps</div>
                <div class="performance-label">대역폭</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 위험 감지 탭 -->
    <div id="threats" class="tab-content">
      <div class="risk-detection-container">
        <!-- 상단 상태 카드 -->
        <div class="risk-status-cards">
          <div class="risk-status-card total">
            <div class="risk-icon">⚠️</div>
            <div class="risk-number" id="totalRiskCount">0</div>
            <div class="risk-label">총 위험 상황</div>
          </div>
          <div class="risk-status-card high">
            <div class="risk-icon">🔴</div>
            <div class="risk-number" id="highRiskCount">0</div>
            <div class="risk-label">높음</div>
          </div>
          <div class="risk-status-card medium">
            <div class="risk-icon">🟠</div>
            <div class="risk-number" id="mediumRiskCount">0</div>
            <div class="risk-label">보통</div>
          </div>
          <div class="risk-status-card low">
            <div class="risk-icon">🟡</div>
            <div class="risk-number" id="lowRiskCount">0</div>
            <div class="risk-label">낮음</div>
          </div>
          <div class="risk-status-card resolved">
            <div class="risk-icon">✅</div>
            <div class="risk-number" id="resolvedCount">0</div>
            <div class="risk-label">해결됨</div>
          </div>
        </div>

        <!-- 필터 및 컨트롤 -->
        <div class="risk-filter-section">
          <h3 class="filter-title">▽ 위험 상황 필터</h3>
          <div class="filter-controls">
            <div class="filter-group">
              <label>위험도</label>
              <select id="riskLevelFilter">
                <option value="all">전체</option>
                <option value="high">높음</option>
                <option value="medium">보통</option>
                <option value="low">낮음</option>
              </select>
            </div>
            <div class="filter-group">
              <label>시간 범위</label>
              <select id="timeRangeFilter">
                <option value="24h">24시간</option>
                <option value="7d">7일</option>
                <option value="30d">30일</option>
              </select>
            </div>
            <div class="filter-group">
              <label>해결된 항목 표시</label>
              <select id="resolvedFilter">
                <option value="hidden">숨김</option>
                <option value="show">표시</option>
              </select>
            </div>
            <div class="filter-actions">
              <button class="filter-btn" onclick="openNotificationSettings()">
                ⚙️ 알림 설정
              </button>
              <button class="filter-btn" onclick="openResolvedItems()">
                👁️ 해결된 항목 보기
              </button>
            </div>
          </div>
        </div>

        <!-- 위험 상황 목록 -->
        <div class="risk-list-section">
          <h3 class="risk-list-title">○ 위험 상황 목록 (<span id="riskListCount">0</span>건)</h3>
          <div class="risk-list-content" id="riskListContent">
            <!-- 위험 상황이 없을 때 표시 -->
            <div class="no-risk-message">
              <div class="no-risk-icon">🛡️</div>
              <div class="no-risk-title">현재 발견되는 위험 요소는 없습니다</div>
              <div class="no-risk-desc">현재 필터 조건에 해당하는 위험 상황이 감지되지 않았습니다.</div>
            </div>
          </div>
        </div>

        <!-- 위험 감지 설정 -->
        <div class="risk-detection-settings">
          <h3 class="settings-title">🔔 위험 감지 설정</h3>
          <div class="settings-content">
            <div class="threshold-settings">
              <h4>감지 임계값</h4>
              <div class="threshold-item">
                <span class="threshold-label">높은 위험 (강도)</span>
                <input type="range" min="0" max="10" value="8" class="threshold-slider" id="highRiskThreshold">
                <span class="threshold-value">8</span>
              </div>
              <div class="threshold-item">
                <span class="threshold-label">보통 위험 (강도)</span>
                <input type="range" min="0" max="10" value="6" class="threshold-slider" id="mediumRiskThreshold">
                <span class="threshold-value">6</span>
              </div>
              <div class="threshold-item">
                <span class="threshold-label">낮은 위험 (강도)</span>
                <input type="range" min="0" max="10" value="4" class="threshold-slider" id="lowRiskThreshold">
                <span class="threshold-value">4</span>
              </div>
            </div>
            <div class="notification-settings">
              <h4>알림 설정</h4>
              <div class="notification-item">
                <span class="notification-label">9 이상</span>
                <span class="notification-type">실시간 알림</span>
                <button class="notification-toggle active">활성화</button>
              </div>
              <div class="notification-item">
                <span class="notification-label">7-8</span>
                <span class="notification-type">이메일 알림</span>
                <button class="notification-toggle">비활성화</button>
              </div>
              <div class="notification-item">
                <span class="notification-label">5-6</span>
                <span class="notification-type">SMS 알림</span>
                <button class="notification-toggle">비활성화</button>
              </div>
            </div>
          </div>
        </div>

        <!-- 하단 정보 -->
        <div class="risk-summary">
          <span class="summary-text">📈 지난 24시간 동안 <span id="activeRiskCount">0</span>건의 활성 위험 상황이 감지되었습니다.</span>
          <div style="margin-top:12px;text-align:center">
            <button class="contact-support-btn" id="openChatBtn">고객센터 문의</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 이력 관리 탭 -->
    <div id="history" class="tab-content">
      <div class="history-section">
        <div class="history-header">
          <h3 class="history-title">📋 위험 감정 이력</h3>
          <div class="history-controls">
            <button class="control-btn" onclick="refreshHistory()">🔄 새로고침</button>
            <button class="control-btn" onclick="exportData()">💾 데이터 내보내기</button>
            <button class="control-btn" onclick="clearHistory()">🗑️ 이력 삭제</button>
          </div>
        </div>

        <div class="history-list" id="historyList">
          <div class="history-item threat">
            <div class="history-info">
              <div class="history-time">2024-01-15 14:32:15</div>
              <div class="history-desc">화남 패턴 감지 - 높은 패킷 전송률</div>
            </div>
            <div class="history-severity high">높음</div>
          </div>

          <div class="history-item warning">
            <div class="history-info">
              <div class="history-time">2024-01-15 14:15:42</div>
              <div class="history-desc">불안 패턴 감지 - 비정상적인 엔트로피</div>
            </div>
            <div class="history-severity medium">중간</div>
          </div>

          <div class="history-item normal">
            <div class="history-info">
              <div class="history-time">2024-01-15 14:00:18</div>
              <div class="history-desc">평온 상태 복구 - 정상적인 트래픽 패턴</div>
            </div>
            <div class="history-severity low">낮음</div>
          </div>

          <div class="history-item threat">
            <div class="history-info">
              <div class="history-time">2024-01-15 13:45:33</div>
              <div class="history-desc">화남 패턴 감지 - 외부 연결 시도</div>
            </div>
            <div class="history-severity high">높음</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin: GitHub 자동 덮어쓰기 및 Vercel 트리거 UI (추가) -->

  <!-- Chatbot assets -->
  <link rel="stylesheet" href="/chatbot.css">
  <script src="/chatbot.js"></script>
  <script>
    // Enable chat button and check chatbot availability
    (function () {
      function setupChatButton() {
        var btn = document.getElementById('openChatBtn');
        if (!btn) return;
        btn.addEventListener('click', function (e) {
          if (typeof window.openNetMoodChat === 'function') {
            window.openNetMoodChat();
          } else {
            console.log('openNetMoodChat not available yet.');
            // fallback: show a simple alert
            alert('고객센터를 이용하려면 페이지를 잠시 후에 다시 시도해주세요.');
          }
        });
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupChatButton);
      } else {
        setupChatButton();
      }
    })();
  </script>



  <div class="modal-overlay" id="adminSyncOverlay" role="presentation"
    style="display:none; align-items:center; justify-content:center;">
    <div class="modal-content" role="dialog" aria-modal="true" style="width:520px; max-width:92vw;">
      <div class="modal-header">
        <h2 class="modal-title">GitHub / Vercel 연동</h2>
        <button class="modal-close-btn" type="button" aria-label="닫기" data-close-admin>✕</button>
      </div>
      <div class="modal-body" style="display:grid; gap:10px;">
        <label>Owner / Org <input id="ghOwner" placeholder="owner" style="width:100%"></label>
        <label>Repo <input id="ghRepo" placeholder="repo" style="width:100%"></label>
        <label>파일 경로 (예: integrated-dashboard.html) <input id="ghPath" placeholder="path/to/file.html"
            style="width:100%"></label>
        <label>브랜치 <input id="ghBranch" placeholder="main" value="main" style="width:100%"></label>
        <label>커밋 메시지 <input id="ghMessage" placeholder="Auto update from dashboard" style="width:100%"></label>
        <label>GitHub Token <input id="ghToken" type="password" placeholder="ghp_..." style="width:100%"></label>
        <hr>
        <label>Vercel Deploy Hook URL (선택) <input id="vercelHook"
            placeholder="https://api.vercel.com/v1/integrations/deploy/..." style="width:100%"></label>
        <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap;">
          <button id="doGithubPush" class="action-btn primary" type="button">자동 덮어쓰기</button>
          <button id="doVercelDeploy" class="action-btn secondary" type="button">Vercel 배포 트리거</button>
          <button id="saveAdminConfig" class="action-btn secondary" type="button">설정 저장</button>
        </div>
        <pre id="adminSyncLog"
          style="margin-top:8px; font-family:monospace; max-height:200px; overflow:auto; background:#f6f8fa; padding:8px; border-radius:6px;"></pre>
      </div>
    </div>
  </div>

  <!-- 사용자 도움말 팝업 -->
  <div id="helpPopup" class="help-popup" onclick="closeHelpPopup(event)">
    <div class="help-popup-content" onclick="event.stopPropagation()">
      <button class="help-close" onclick="closeHelpPopup()">&times;</button>
      <h2 style="color: #1f6f68; margin-bottom: 20px;">사용자 도움말</h2>
      <div style="line-height: 1.6;">
        <h3>NetMood Analyzer란?</h3>
        <p>NetMood Analyzer는 네트워크 트래픽 데이터를 AI 기술로 분석하여 감정(예: 기쁨 - 저지연 부드러운 흐름, 스트레스 - 패킷 손실이나 지연 증가)으로 표현하는 혁신적인 웹
          대시보드입니다. 네트워크 상태를 숫자나 그래프가 아닌 인간적인 관점으로 직관적으로 이해할 수 있도록 돕는 도구로, 네트워크 관리자나 초보자 모두에게 유용합니다.</p>

        <h3>사용 방법</h3>
        <p>먼저 '네트워크 파일 선택' 버튼을 클릭해 분석할 파일을 선택한 후 '파일 업로드' 버튼을 눌러 업로드를 시작하세요. 업로드가 완료되면 AI가 실시간으로 감정 분석을 수행하고, 결과는
          Chart.js 기반의 라인 차트와 데이터 카드로 시각화됩니다. 추가로 '서비스 안내' 또는 '사용자 도움말' 버튼을 통해 더 자세한 가이드를 확인할 수 있습니다.</p>

        <h3>파일 업로드 방법</h3>
        <p>지원 파일 형식은 PCAP 또는 CSV입니다. 파일을 선택한 후 업로드 버튼을 클릭하면 Netlify Functions가 백엔드에서 데이터를 파싱하고 감정 점수(0~100)를 계산합니다. 예를
          들어, 지연 &lt;50ms는 '기쁨 80점', 패킷 손실 &gt;0.1%는 '스트레스 90점'으로 매핑되며, 결과는 시간대별 변화 그래프로 표시됩니다. 업로드 중 오류가 발생하면 파일 형식을
          확인하거나, help@netmoodanalyzer.com으로 문의하세요.</p>
      </div>
    </div>
  </div>

  <script src="deployment-config.js"></script>
  <script src="dashboard-integration.js"></script>
  <script src="network-monitor.js"></script>
  <script>
    // 약관 동의 상태 체크
    document.addEventListener('DOMContentLoaded', function () {
      // Avoid immediate redirect to stop flicker between pages.
      // If terms are not accepted, show a consent overlay with actions instead of redirecting.
      if (localStorage.getItem('termsAccepted') !== 'true') {
        showConsentOverlay();
      } else if (localStorage.getItem('termsRejected') === 'true') {
        // If explicitly rejected, show a clear service-closed screen
        showRejectedScreen();
      }

      function showConsentOverlay() {
        // if overlay already exists, do nothing
        if (document.getElementById('consentOverlay')) return;
        const overlay = document.createElement('div');
        overlay.id = 'consentOverlay';
        overlay.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:12000;';
        overlay.innerHTML = `
          <div style="background:#fff;border-radius:12px;padding:22px;max-width:680px;width:94%;box-shadow:0 10px 40px rgba(0,0,0,0.25);">
            <h2 style="margin:0 0 12px;color:#1f6f68;">서비스 이용약관 동의 필요</h2>
            <p style="margin:0 0 12px;color:#444;line-height:1.5;">NetMood Analyzer를 계속 사용하려면 서비스 이용약관 및 개인정보 처리방침에 동의해야 합니다. 아래 버튼으로 약관 확인 또는 즉시 동의하실 수 있습니다.</p>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:14px;flex-wrap:wrap;">
              <button id="consentGoTerms" style="padding:10px 14px;border-radius:8px;border:1px solid #e6eef8;background:transparent;cursor:pointer;">약관 확인하러 가기</button>
              <button id="consentAcceptInline" style="padding:10px 14px;border-radius:8px;background:#2563eb;color:#fff;border:none;cursor:pointer;">지금 동의하고 계속</button>
            </div>
          </div>`;
        document.body.appendChild(overlay);

        document.getElementById('consentGoTerms').addEventListener('click', function () {
          // navigate to index terms page without force reloading the dashboard
          window.location.href = 'index.html';
        });

        document.getElementById('consentAcceptInline').addEventListener('click', function () {
          try { localStorage.setItem('netmood_consent_v1', 'true'); localStorage.setItem('termsAccepted', 'true'); localStorage.removeItem('termsRejected'); } catch (e) { }
          const el = document.getElementById('consentOverlay'); if (el) el.remove();
        });
      }

      function showRejectedScreen() {
        document.body.innerHTML = `
          <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            <div style="text-align: center; padding: 50px; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); max-width: 500px; margin: 20px;">
              <div style="font-size: 4rem; margin-bottom: 20px;">🚫</div>
              <h1 style="color: #e74c3c; margin-bottom: 20px; font-size: 2rem;">서비스 종료</h1>
              <p style="color: #666; font-size: 1.1rem; margin-bottom: 30px; line-height: 1.6;">약관에 동의하지 않아 서비스가 종료되었습니다.</p>
              <p style="color: #999; font-size: 0.9rem; margin-bottom: 30px;">서비스를 이용하려면 페이지를 새로고침하여 약관에 동의해주세요.</p>
              <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button onclick="location.reload()" style="padding: 12px 24px; background: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500; transition: background 0.3s;">
                  페이지 새로고침
                </button>
                <button onclick="window.history.back()" style="padding: 12px 24px; background: #95a5a6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500; transition: background 0.3s;">
                  이전 페이지
                </button>
              </div>
            </div>
          </div>
        `;
      }
    });

    // 접근성 모달: 공통 오버레이 2개 (상세/알림)
    // detailModal
    document.body.insertAdjacentHTML('beforeend', `
      <div class="modal-overlay" id="detailModalOverlay" role="presentation">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="detailModalTitle" aria-describedby="detailModalDesc" tabindex="-1">
          <div class="modal-header">
            <h2 class="modal-title" id="detailModalTitle">상세 정보</h2>
            <button class="modal-close-btn" type="button" aria-label="닫기" data-close-modal>✕</button>
          </div>
          <div class="modal-body">
            <p id="detailModalDesc">선택한 항목의 상세 정보입니다.</p>
            <div id="detailModalContent"></div>
          </div>
        </div>
      </div>
    `);

    // 감정 설명 모달
    document.body.insertAdjacentHTML('beforeend', `
      <div class="modal-overlay" id="emotionDescriptionModalOverlay" role="presentation">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="emotionDescriptionModalTitle" aria-describedby="emotionDescriptionModalDesc" tabindex="-1" style="max-width: 800px;">
          <div class="modal-header">
            <h2 class="modal-title" id="emotionDescriptionModalTitle">감정 설명</h2>
            <button class="modal-close-btn" type="button" aria-label="닫기" data-close-modal>✕</button>
          </div>
          <div class="modal-body" id="emotionDescriptionModalDesc">
            <div style="line-height: 1.6; color: #444;">
              <div style="margin-bottom: 25px; padding: 20px; border-left: 4px solid #4CAF50; background: #f8fff9;">
                <h3 style="margin: 0 0 12px 0; color: #4CAF50; font-size: 1.2rem;">기쁨(Joy)</h3>
                <p style="margin: 0 0 8px 0; font-size: 1rem;">"네트워크가 안정적으로 작동해 사용자에게 긍정적인 경험을 주는 상태입니다. 초록색(#4CAF50) 차트로 시각화됩니다."</p>
              </div>
              
              <div style="margin-bottom: 25px; padding: 20px; border-left: 4px solid #F44336; background: #fff5f5;">
                <h3 style="margin: 0 0 12px 0; color: #F44336; font-size: 1.2rem;">스트레스(Stress)</h3>
                <p style="margin: 0 0 8px 0; font-size: 1rem;">"네트워크에 장애나 과부하가 발생하면 스트레스 상태로 분석되며, 빨간색(#F44336) 차트로 표현됩니다. 이때 사용자 피로와 불편이 늘어날 수 있습니다."</p>
              </div>
              
              <div style="margin-bottom: 25px; padding: 20px; border-left: 4px solid #2196F3; background: #f0f8ff;">
                <h3 style="margin: 0 0 12px 0; color: #2196F3; font-size: 1.2rem;">평온(Calm)</h3>
                <p style="margin: 0 0 8px 0; font-size: 1rem;">"네트워크 트래픽이 규칙적으로 유지되고, 연결에 전혀 불안 요소가 감지되지 않을 때 분석되는 감정입니다. 평온 상태일 때는 파란색(#2196F3) 라인으로 표시됩니다. 사용자 입장에서 시스템이 안정적으로 작동하므로 긴장 없이 편안함을 느낄 수 있습니다."</p>
              </div>
              
              <div style="margin-bottom: 25px; padding: 20px; border-left: 4px solid #FF9800; background: #fff8e1;">
                <h3 style="margin: 0 0 12px 0; color: #FF9800; font-size: 1.2rem;">화남(Anger)</h3>
                <p style="margin: 0 0 8px 0; font-size: 1rem;">"트래픽에서 여러 번의 심각한 장애, 빈번한 오류, 연결 실패 등 부정적 정보가 반복적으로 확인될 경우 이 감정이 감지됩니다. 화남 상태일 때는 주황색(#FF9800) 라인으로 표시됩니다. 네트워크에 대한 불만, 짜증, 분노를 유발할 수 있는 상황을 의미합니다."</p>
              </div>
              
              <div style="margin-bottom: 25px; padding: 20px; border-left: 4px solid #9C27B0; background: #faf0ff;">
                <h3 style="margin: 0 0 12px 0; color: #9C27B0; font-size: 1.2rem;">불안(Anxiety)</h3>
                <p style="margin: 0 0 8px 0; font-size: 1rem;">"일관되지 않은 신호, 예상치 못한 트래픽 변화, 미약한 장애 징후 등 미래에 문제가 생길 수 있다는 불확실성이 감지되면 불안 감정이 분석됩니다. 불안 상태일 때는 보라색(#9C27B0) 라인으로 나타나며, 사용자는 네트워크 안정성에 대해 우려나 불확실함을 느낄 수 있습니다."</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    `);

    // notificationSettingsModal
    document.body.insertAdjacentHTML('beforeend', `
      <div class="modal-overlay" id="notificationModalOverlay" role="presentation">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="notificationModalTitle" aria-describedby="notificationModalDesc" tabindex="-1">
          <div class="modal-header">
            <h2 class="modal-title" id="notificationModalTitle">알림 설정</h2>
            <button class="modal-close-btn" type="button" aria-label="닫기" data-close-modal>✕</button>
          </div>
          <div class="modal-body">
            <p id="notificationModalDesc">위험 감정 발생 시 받을 알림 방식을 설정하세요.</p>
            <form id="notificationForm" onsubmit="return false;">
              <div style="display:grid; gap:12px;">
                <label><input type="checkbox" name="channel" value="realtime"> 실시간 알림</label>
                <label><input type="checkbox" name="channel" value="email"> 이메일</label>
                <label><input type="checkbox" name="channel" value="sms"> SMS</label>
                <label><input type="checkbox" name="channel" value="push"> 푸시 알림</label>
                <label>임계값 (0~100): <input type="number" name="threshold" min="0" max="100" value="70" style="width:90px"></label>
                <label>알림 간격:
                  <select name="interval">
                    <option value="immediate">즉시</option>
                    <option value="5m">5분</option>
                    <option value="30m">30분</option>
                  </select>
                </label>
                <div>
                  <button class="action-btn primary" type="button" onclick="saveNotificationSettings()">저장</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    `);

    // emotionGuideModal
    document.body.insertAdjacentHTML('beforeend', `
      <div class="modal-overlay" id="emotionGuideModalOverlay" role="presentation">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="emotionGuideModalTitle" aria-describedby="emotionGuideModalDesc" tabindex="-1" style="max-width: 800px;">
          <div class="modal-header">
            <h2 class="modal-title" id="emotionGuideModalTitle">감정 분류 시스템 가이드</h2>
            <button class="modal-close-btn" type="button" aria-label="닫기" data-close-modal>✕</button>
          </div>
          <div class="modal-body" id="emotionGuideModalDesc">
            <div style="line-height: 1.6; color: #444;">
              <p style="margin-bottom: 20px; font-size: 1.1rem; color: #333;">
                AI 기반 네트워크 감정 분석 시스템의 5가지 감정 유형과 분류 기준, 전문 용어에 대한 상세한 설명을 제공합니다.
              </p>
              
              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="margin: 0 0 12px 0; color: #333;">🤖 AI 기반 네트워크 감정 분석이란?</h3>
                <p style="margin: 0; font-size: 0.95rem;">
                  각 감정은 네트워크 트래픽의 변동과 특징을 AI가 심리학 이론에 맞춰 자동 분석·분류한 결과입니다. 
                  주요 분석 기준은 정서 극성(Valence), 각성도(Arousal), 감성 분석(Sentiment Analysis), 이상 탐지(Anomaly Detection) 등이며, 
                  복잡한 네트워크 데이터의 상태를 직관적으로 보여줍니다.
                </p>
              </div>

              <h3 style="color: #333; margin-bottom: 16px;">감정 유형별 상세 설명</h3>
              
              <div style="margin-bottom: 20px; padding: 16px; border-left: 4px solid #28a745; background: #f8fff9;">
                <h4 style="margin: 0 0 8px 0; color: #28a745;">😊 평온 (Calm)</h4>
                <p style="margin: 0 0 8px 0; font-size: 0.95rem;">네트워크 트래픽이 안정적이고 예측 가능한 패턴을 보이는 상태</p>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #666;">
                  <li>일정한 데이터 흐름</li>
                  <li>낮은 지연 시간</li>
                  <li>안정적인 대역폭 사용률</li>
                  <li>오류율 최소화</li>
                </ul>
              </div>

              <div style="margin-bottom: 20px; padding: 16px; border-left: 4px solid #17a2b8; background: #f0f8ff;">
                <h4 style="margin: 0 0 8px 0; color: #17a2b8;">😁 기쁨 (Happy)</h4>
                <p style="margin: 0 0 8px 0; font-size: 0.95rem;">트래픽이 원활하고 모든 성능 지표가 우수한 최적 상태</p>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #666;">
                  <li>높은 처리량</li>
                  <li>빠른 응답 속도</li>
                  <li>효율적인 자원 활용</li>
                  <li>사용자 만족도 극대화</li>
                </ul>
              </div>

              <div style="margin-bottom: 20px; padding: 16px; border-left: 4px solid #6f42c1; background: #f8f4ff;">
                <h4 style="margin: 0 0 8px 0; color: #6f42c1;">😰 스트레스 (Stressed)</h4>
                <p style="margin: 0 0 8px 0; font-size: 0.95rem;">높은 트래픽 부하나 처리 지연이 발생하여 시스템에 부담이 가는 상태</p>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #666;">
                  <li>높은 CPU/메모리 사용률</li>
                  <li>증가된 응답 시간</li>
                  <li>대역폭 포화 상태</li>
                  <li>리소스 경합 발생</li>
                </ul>
              </div>

              <div style="margin-bottom: 20px; padding: 16px; border-left: 4px solid #ffc107; background: #fffdf0;">
                <h4 style="margin: 0 0 8px 0; color: #ffc107;">😟 불안 (Anxious)</h4>
                <p style="margin: 0 0 8px 0; font-size: 0.95rem;">트래픽 패턴이 불규칙하고 예측하기 어려워 불안정한 상태</p>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #666;">
                  <li>불규칙한 데이터 패턴</li>
                  <li>예측 불가능한 트래픽 급증</li>
                  <li>간헐적인 연결 불안정</li>
                  <li>성능 지표 변동성 증가</li>
                </ul>
              </div>

              <div style="margin-bottom: 20px; padding: 16px; border-left: 4px solid #dc3545; background: #fff5f5;">
                <h4 style="margin: 0 0 8px 0; color: #dc3545;">😡 화남 (Angry)</h4>
                <p style="margin: 0 0 8px 0; font-size: 0.95rem;">심각한 네트워크 문제나 장애가 발생하여 즉시 조치가 필요한 위험 상태</p>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.9rem; color: #666;">
                  <li>시스템 장애 또는 오류</li>
                  <li>연결 끊김 빈발</li>
                  <li>심각한 성능 저하</li>
                  <li>긴급 대응 필요</li>
                </ul>
              </div>

              <h3 style="color: #333; margin-bottom: 16px;">핵심 전문 용어 해설</h3>
              
              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <h4 style="margin: 0 0 8px 0; color: #333;">정서 극성 (Valence)</h4>
                <p style="margin: 0; font-size: 0.9rem; color: #666;">
                  네트워크 상태의 긍정적/부정적 정도를 나타내는 지표로, 성능이 좋을수록 높은 정서 극성을 가집니다.
                </p>
              </div>

              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <h4 style="margin: 0 0 8px 0; color: #333;">각성도 (Arousal)</h4>
                <p style="margin: 0; font-size: 0.9rem; color: #666;">
                  네트워크 활동의 강도나 변화량을 측정하는 지표로, 트래픽 변동이 클수록 높은 각성도를 보입니다.
                </p>
              </div>

              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <h4 style="margin: 0 0 8px 0; color: #333;">감성 분석 (Sentiment Analysis)</h4>
                <p style="margin: 0; font-size: 0.9rem; color: #666;">
                  네트워크 트래픽 데이터에서 패턴을 분석하여 감정적 상태를 추출하는 AI 기술입니다.
                </p>
              </div>

              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                <h4 style="margin: 0 0 8px 0; color: #333;">이상 탐지 (Anomaly Detection)</h4>
                <p style="margin: 0; font-size: 0.9rem; color: #666;">
                  정상적인 네트워크 패턴에서 벗어난 비정상적인 데이터나 행동을 자동으로 식별하는 기술입니다.
                </p>
              </div>

              <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                <h4 style="margin: 0 0 8px 0; color: #333;">패턴 분류 (Pattern Classification)</h4>
                <p style="margin: 0; font-size: 0.9rem; color: #666;">
                  머신러닝을 통해 네트워크 트래픽의 다양한 패턴을 학습하고 실시간으로 분류하는 과정입니다.
                </p>
              </div>

              <div style="background: linear-gradient(135deg, #27d3b2, #20c997); color: white; padding: 20px; border-radius: 8px;">
                <h3 style="margin: 0 0 16px 0; color: white;">💡 효과적인 활용 방법</h3>
                <ul style="margin: 0; padding-left: 20px; font-size: 0.95rem;">
                  <li style="margin-bottom: 8px;">실시간 모니터링: 감정 변화 패턴을 통해 네트워크 문제를 조기에 감지하세요</li>
                  <li style="margin-bottom: 8px;">예방적 관리: '스트레스'나 '불안' 상태가 지속되면 사전 점검을 진행하세요</li>
                  <li style="margin-bottom: 8px;">성능 최적화: '평온'과 '기쁨' 상태의 패턴을 분석하여 최적 설정을 찾으세요</li>
                  <li>장애 대응: '화남' 상태 발생 시 즉시 알림을 통해 신속한 대응이 가능합니다</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    `);

    // Admin GitHub overwrite + Vercel trigger (추가)
    // 사용법: 모달에 owner/repo/path/branch/token 입력 후 "자동 덮어쓰기" 클릭.
    // 주의: GitHub token을 클라이언트에 저장하면 보안 위험이 있으니 안전한 환경에서만 사용하세요.
    (function () {
      const adminBtn = document.getElementById('adminSyncBtn');
      const overlay = document.getElementById('adminSyncOverlay');
      const closeBtns = overlay ? overlay.querySelectorAll('[data-close-admin]') : [];
      const logEl = document.getElementById('adminSyncLog');

      function log(msg) {
        if (!logEl) return;
        logEl.textContent += `[${new Date().toLocaleTimeString()}] ${msg}\n`;
        logEl.scrollTop = logEl.scrollHeight;
      }

      function openAdmin() {
        if (!overlay) return;
        overlay.style.display = 'flex';
        overlay.classList.add('active');
        const dialog = overlay.querySelector('[role="dialog"]');
        if (dialog) dialog.focus();
      }
      function closeAdmin() {
        if (!overlay) return;
        overlay.style.display = 'none';
        overlay.classList.remove('active');
      }

      adminBtn?.addEventListener('click', openAdmin);
      closeBtns.forEach(b => b.addEventListener('click', closeAdmin));
      overlay?.addEventListener('click', (e) => { if (e.target === overlay) closeAdmin(); });

      // 로컬 설정 로드
      const fieldIds = ['ghOwner', 'ghRepo', 'ghPath', 'ghBranch', 'ghMessage', 'ghToken', 'vercelHook'];
      fieldIds.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        const v = localStorage.getItem('admin_' + id);
        if (v) el.value = v;
      });

      document.getElementById('saveAdminConfig')?.addEventListener('click', () => {
        fieldIds.forEach(id => {
          const el = document.getElementById(id);
          if (!el) return;
          localStorage.setItem('admin_' + id, el.value);
        });
        log('설정이 로컬에 저장되었습니다.');
      });

      async function githubGetSha(owner, repo, path, branch, token) {
        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(branch)}`;
        const res = await fetch(url, { headers: { Authorization: 'token ' + token, Accept: 'application/vnd.github.v3+json' } });
        if (res.ok) {
          const data = await res.json();
          return data.sha;
        }
        return null;
      }

      function toBase64(str) {
        return btoa(unescape(encodeURIComponent(str)));
      }

      async function githubOverwrite() {
        const owner = (document.getElementById('ghOwner') || {}).value?.trim();
        const repo = (document.getElementById('ghRepo') || {}).value?.trim();
        const path = (document.getElementById('ghPath') || {}).value?.trim();
        const branch = (document.getElementById('ghBranch') || {}).value?.trim() || 'main';
        const message = (document.getElementById('ghMessage') || {}).value?.trim() || 'Auto update from dashboard';
        const token = (document.getElementById('ghToken') || {}).value?.trim();

        if (!owner || !repo || !path || !token) { log('필수값 누락: owner, repo, path, token 확인하세요.'); return; }

        log('SHA 조회 시도...');
        let sha = null;
        try {
          sha = await githubGetSha(owner, repo, path, branch, token);
          log('SHA 조회 완료: ' + (sha || '파일 없음(신규 생성)'));
        } catch (err) { log('SHA 조회 실패: ' + err); }

        log('문서 콘텐츠 인코딩 중...');
        const content = document.documentElement.outerHTML;
        const encoded = toBase64(content);

        const payload = { message, content: encoded, branch };
        if (sha) payload.sha = sha;

        const putUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`;
        log('GitHub 업로드 요청 전송...');
        try {
          const res = await fetch(putUrl, {
            method: 'PUT',
            headers: {
              Authorization: 'token ' + token,
              Accept: 'application/vnd.github.v3+json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if (res.ok) {
            log('업로드 성공: ' + (data.commit?.html_url || '커밋 생성됨'));
            if (data.content?.sha) log('새 SHA: ' + data.content.sha);
          } else {
            log('업로드 실패: ' + (data.message || JSON.stringify(data)));
          }
        } catch (err) {
          log('업로드 예외: ' + err);
        }
      }

      async function triggerVercel() {
        const hook = (document.getElementById('vercelHook') || {}).value?.trim();
        if (!hook) { log('Vercel Hook URL 미입력. 설정 또는 입력 후 시도하세요.'); return; }
        log('Vercel 트리거 전송...');
        try {
          const res = await fetch(hook, { method: 'POST' });
          if (res.ok) log('Vercel 요청 전송 완료: ' + res.status);
          else log('Vercel 요청 실패: ' + res.status);
        } catch (err) {
          log('Vercel 호출 예외: ' + err);
        }
      }

      document.getElementById('doGithubPush')?.addEventListener('click', async () => {
        if (logEl) logEl.textContent = '';
        await githubOverwrite();
      });
      document.getElementById('doVercelDeploy')?.addEventListener('click', async () => {
        if (logEl) logEl.textContent = '';
        await triggerVercel();
      });

    })();

    // 사용자 도움말 팝업 관련 함수
    // 팝업 열기 함수
    function showHelpPopup() {
      const popup = document.getElementById('helpPopup');
      if (popup) {
        popup.classList.add('active'); // 클래스 추가로 활성화
        // 또는 popup.style.display = 'flex'; // 스타일로도 가능
      }
    }

    // 팝업 닫기 함수
    function closeHelpPopup(event) {
      const popup = document.getElementById('helpPopup');
      if (popup) {
        // 팝업 내부 클릭 시 닫히지 않도록 처리
        if (event.target === popup || event.target.classList.contains('help-close')) {
          popup.classList.remove('active');
          // 또는 popup.style.display = 'none';
        }
      }
    }

    // 이벤트 리스너 연결
    document.addEventListener('DOMContentLoaded', () => {
      const helpBtn = document.querySelector('.nav-button.help');
      if (helpBtn) {
        helpBtn.addEventListener('click', showHelpPopup);
      }

      const popup = document.getElementById('helpPopup');
      if (popup) {
        popup.addEventListener('click', closeHelpPopup);
        const closeBtn = popup.querySelector('.help-close');
        if (closeBtn) {
          closeBtn.addEventListener('click', closeHelpPopup);
        }
      }
    });


    // 감정 차트 초기화 및 더미 데이터
    let emotionChart = null;

    function initializeEmotionChart() {
      const ctx = document.getElementById('emotionDetailChart');
      if (!ctx) return;

      // 더미 데이터 생성 (24시간, 1시간 간격)
      const labels = [];
      const calmData = [];
      const joyData = [];
      const stressData = [];
      const anxietyData = [];
      const angerData = [];

      for (let i = 0; i < 24; i++) {
        const hour = i.toString().padStart(2, '0') + ':00';
        labels.push(hour);

        // 시간대별 감정 패턴 생성
        const timeOfDay = i;
        const baseCalm = 0.7 + Math.sin(timeOfDay * Math.PI / 12) * 0.2;
        const baseJoy = 0.5 + Math.cos(timeOfDay * Math.PI / 8) * 0.3;
        const baseStress = 0.3 + Math.sin(timeOfDay * Math.PI / 6) * 0.2;
        const baseAnxiety = 0.4 + Math.cos(timeOfDay * Math.PI / 10) * 0.25;
        const baseAnger = 0.2 + Math.sin(timeOfDay * Math.PI / 15) * 0.15;

        calmData.push((baseCalm + (Math.random() - 0.5) * 0.1).toFixed(2));
        joyData.push((baseJoy + (Math.random() - 0.5) * 0.1).toFixed(2));
        stressData.push((baseStress + (Math.random() - 0.5) * 0.1).toFixed(2));
        anxietyData.push((baseAnxiety + (Math.random() - 0.5) * 0.1).toFixed(2));
        angerData.push((baseAnger + (Math.random() - 0.5) * 0.1).toFixed(2));
      }

      emotionChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [
            {
              label: '평온',
              data: calmData,
              borderColor: '#28a745',
              backgroundColor: 'rgba(40, 167, 69, 0.1)',
              tension: 0.4,
              fill: false
            },
            {
              label: '기쁨',
              data: joyData,
              borderColor: '#17a2b8',
              backgroundColor: 'rgba(23, 162, 184, 0.1)',
              tension: 0.4,
              fill: false
            },
            {
              label: '스트레스',
              data: stressData,
              borderColor: '#6f42c1',
              backgroundColor: 'rgba(111, 66, 193, 0.1)',
              tension: 0.4,
              fill: false
            },
            {
              label: '불안',
              data: anxietyData,
              borderColor: '#ffc107',
              backgroundColor: 'rgba(255, 193, 7, 0.1)',
              tension: 0.4,
              fill: false
            },
            {
              label: '화남',
              data: angerData,
              borderColor: '#dc3545',
              backgroundColor: 'rgba(220, 53, 69, 0.1)',
              tension: 0.4,
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              max: 2.0,
              ticks: {
                stepSize: 0.2
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
    }

    // 시간 범위 업데이트 함수
    function updateEmotionChartRange(range) {
      if (!emotionChart) return;

      // 버튼 활성화 상태 업데이트
      document.querySelectorAll('.time-range-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`[data-range="${range}"]`).classList.add('active');

      // 범위에 따른 데이터 업데이트
      let labels = [];
      let dataPoints = 24;

      if (range === '1d') {
        dataPoints = 24;
        for (let i = 0; i < 24; i++) {
          labels.push(i.toString().padStart(2, '0') + ':00');
        }
      } else if (range === '1m') {
        dataPoints = 30;
        for (let i = 1; i <= 30; i++) {
          labels.push(i + '일');
        }
      } else if (range === '3m') {
        dataPoints = 12;
        for (let i = 1; i <= 12; i++) {
          labels.push(i + '주');
        }
      }

      // 새로운 더미 데이터 생성
      const newData = emotionChart.data.datasets.map(dataset => {
        const newValues = [];
        for (let i = 0; i < dataPoints; i++) {
          const randomValue = 0.5 + Math.random() * 1.0;
          newValues.push(randomValue.toFixed(2));
        }
        return {
          ...dataset,
          data: newValues
        };
      });

      emotionChart.data.labels = labels;
      emotionChart.data.datasets = newData;
      emotionChart.update();
    }

    // CSV 파일 선택 함수
    function selectCsvFile() {
      const fileInput = document.getElementById('csvFileInputAnalysis2');
      const selectBtn = document.getElementById('selectFileBtn');
      const uploadBtn = document.getElementById('uploadCsvBtn');

      fileInput.click();

      // 파일 선택 이벤트 리스너
      fileInput.addEventListener('change', function (e) {
        if (e.target.files && e.target.files.length > 0) {
          const file = e.target.files[0];

          // 파일 크기 체크 (10MB)
          if (file.size > 10 * 1024 * 1024) {
            showUploadStatus('파일 크기가 10MB를 초과합니다.', 'error');
            return;
          }

          // 파일 형식 체크
          if (!file.name.toLowerCase().endsWith('.csv')) {
            showUploadStatus('CSV 파일만 업로드 가능합니다.', 'error');
            return;
          }

          // 선택된 파일 정보 표시
          showUploadStatus(`선택된 파일: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`, 'success');

          // 업로드 버튼 표시
          selectBtn.style.display = 'none';
          uploadBtn.style.display = 'inline-block';
        }
      });
    }

    // CSV 파일 업로드 함수
    function uploadCsvFile() {
      const fileInput = document.getElementById('csvFileInputAnalysis2');
      const uploadBtn = document.getElementById('uploadCsvBtn');
      const selectBtn = document.getElementById('selectFileBtn');

      if (!fileInput.files || fileInput.files.length === 0) {
        showUploadStatus('파일을 먼저 선택해주세요.', 'error');
        return;
      }

      const file = fileInput.files[0];

      // 업로드 버튼 비활성화
      uploadBtn.disabled = true;
      uploadBtn.textContent = '업로드 중...';

      // 파일 읽기
      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const csvContent = e.target.result;
          const lines = csvContent.split('\n');

          if (lines.length < 2) {
            showUploadStatus('CSV 파일에 데이터가 충분하지 않습니다.', 'error');
            resetUploadButton();
            return;
          }

          // CSV 파싱 시뮬레이션 (실제로는 서버로 전송)
          setTimeout(() => {
            showUploadStatus('CSV 파일이 성공적으로 업로드되었습니다!', 'success');
            resetUploadButton();

            // 차트 업데이트 시뮬레이션
            if (emotionChart) {
              updateEmotionChartRange('1d');
            }

            // 상세 분석 데이터 업데이트
            updateAnalysisData();
          }, 2000);

        } catch (error) {
          showUploadStatus('파일을 읽는 중 오류가 발생했습니다.', 'error');
          resetUploadButton();
        }
      };

      reader.onerror = function () {
        showUploadStatus('파일을 읽는 중 오류가 발생했습니다.', 'error');
        resetUploadButton();
      };

      reader.readAsText(file);
    }

    function showUploadStatus(message, type) {
      const uploadStatus = document.getElementById('uploadStatus');
      uploadStatus.textContent = message;
      uploadStatus.className = `upload-status ${type}`;
      uploadStatus.style.display = 'block';
    }

    function resetUploadButton() {
      const uploadBtn = document.getElementById('uploadCsvBtn');
      const selectBtn = document.getElementById('selectFileBtn');
      uploadBtn.disabled = false;
      uploadBtn.textContent = '파일 업로드';
      uploadBtn.style.display = 'none';
      selectBtn.style.display = 'inline-block';
    }

    // 상세 분석 데이터 업데이트 함수
    function updateAnalysisData() {
      // 감정별 퍼센테이지 업데이트
      const emotionCards = document.querySelectorAll('.emotion-card');
      const emotions = ['calm', 'happy', 'anxious', 'angry', 'sad'];
      const percentages = [65, 20, 10, 3, 2]; // 더미 데이터

      emotionCards.forEach((card, index) => {
        if (emotions[index]) {
          const percentageElement = card.querySelector('.emotion-percentage');
          if (percentageElement) {
            percentageElement.textContent = percentages[index] + '%';
          }
        }
      });

      // 분석 정보 업데이트
      const analysisTotal = document.getElementById('analysisTotal');
      const analysisPeriod = document.getElementById('analysisPeriod');

      if (analysisTotal) {
        analysisTotal.textContent = '1,247개';
      }
      if (analysisPeriod) {
        analysisPeriod.textContent = '7일';
      }

      // 감정 범례 값 업데이트
      const legendValues = document.querySelectorAll('.legend-value');
      const legendData = ['0.9', '1.2', '0.8', '1.3', '1.0'];

      legendValues.forEach((value, index) => {
        if (legendData[index]) {
          value.textContent = legendData[index];
        }
      });

      // 위험 감지 데이터 업데이트
      updateThreatData();
    }

    // 위험 감지 데이터 업데이트 함수
    function updateThreatData() {
      const threatItems = document.querySelectorAll('.threat-item');
      const threatData = [
        { level: '높음', type: '패킷 손실', value: '2.3%', time: '2분 전' },
        { level: '중간', type: '지연 증가', value: '150ms', time: '5분 전' },
        { level: '낮음', type: '대역폭 부족', value: '85%', time: '10분 전' }
      ];

      threatItems.forEach((item, index) => {
        if (threatData[index]) {
          const levelElement = item.querySelector('.threat-level');
          const typeElement = item.querySelector('.threat-type');
          const valueElement = item.querySelector('.threat-value');
          const timeElement = item.querySelector('.threat-time');

          if (levelElement) levelElement.textContent = threatData[index].level;
          if (typeElement) typeElement.textContent = threatData[index].type;
          if (valueElement) valueElement.textContent = threatData[index].value;
          if (timeElement) timeElement.textContent = threatData[index].time;
        }
      });
    }

    // 감정 설명 모달 표시 함수
    function showEmotionDescription() {
      const modal = document.getElementById('emotionDescriptionModalOverlay');
      if (modal) {
        modal.style.display = 'flex';
        modal.style.zIndex = '10001';
      }
    }

    // 모달 닫기 이벤트 리스너
    document.addEventListener('click', function (e) {
      if (e.target.matches('[data-close-modal]')) {
        const modal = e.target.closest('.modal-overlay');
        if (modal) {
          modal.style.display = 'none';
        }
      }

      if (e.target.classList.contains('modal-overlay')) {
        e.target.style.display = 'none';
      }
    });

    // 페이지 로드 시 차트 초기화
    document.addEventListener('DOMContentLoaded', function () {
      setTimeout(() => {
        initializeEmotionChart();
        updateAnalysisData(); // 상세 분석 데이터 초기화
      }, 1000); // 약간의 지연을 두어 DOM이 완전히 로드된 후 실행
    });
  </script>


</body>

</html>